{"ts":1381975272023,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\r\n\r\nvar Chat = function(socket) {\r\n\r\n    this.socket = socket;\r\n};\r\n\r\nChat.prototype.sendMessage = function(room, text) {\r\n    var message = {\r\n        room: room,\r\n        text: text\r\n    };\r\n    this.socket.emit('message', message);\r\n};\r\n\r\nChat.prototype.changeRoom = function(room) {\r\n    this.socket.emit('join', {\r\n        newRoom: room\r\n    });\r\n};\r\n\r\n\r\nChat.prototype.processCommand = function(command) {\r\n    var words = command.split(' ');\r\n    var command = words[0]\r\n        .substring(1, words[0].length)\r\n        .toLowerCase();\r\n    var message = false;\r\n    switch(command) {\r\n        case 'join':\r\n            words.shift();\r\n            var room = words.join(' ');\r\n            this.changeRoom(room);\r\n            break;\r\n        case 'nick':\r\n            words.shift();\r\n            var name = words.join(' ');\r\n            this.socket.emit('nameAttempt', name);\r\n            break;\r\n        default:\r\n            message = 'Unrecognized command.';\r\n            break;\r\n    }\r\n    return message;\r\n};"]],"start1":0,"start2":0,"length1":0,"length2":1018}]],"length":1018}
